{% extends 'index.html' %}
{% load static %}
{% load base_tags %}
{% block content %}
<div class="card my-3 shadow">
    <div class="card-header">
        <h5 class="card-title">
            {{title}}
        </h5>
    </div>
    <div class="card-body table-responsive">
        {% if object_list %}
        <table class="table table-sm">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">–ó–∞–≥–æ–ª–æ–≤–æ–∫</th>
                    <th scope="col">–¢–µ–º–∞</th>
                    <th scope="col">–ê–≤—Ç–æ—Ä</th>
                    <th scope="col">–î–∞—Ç–∞ –ø—É–±–ª—ñ–∫–∞—Ü—ó</th>
                    <th scope="col">–î—ñ—ó</th>
                </tr>
            </thead>
            <tbody>
                {% for post in object_list %}
                <tr data-sf-post="{{post.id}}">
                    <td scope="row">{{forloop.counter}}</td>
                    <td>{{post|truncatewords:4}}</td>
                    <td>
                        <a href="{% url 'home' %}?topic={{post.topic}}">{{post.topic}}</a>
                    </td>
                    <td>
                        <a href="{% url 'profile' pk=post.author.id %}">
                            {% firstof post.author.name post.author.username %}
                        </a>
                    </td>
                    <td>{{post.date_created|date}}</td>
                    <td>
                        <a href="{% url 'detail_post' pk=post.id %}"><i class="bi bi-eye"></i></a>
                        <a href="#" class="publish-button" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                            <i class="bi bi-send"></i>
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <h5 class="text-center">–ù–µ–ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏—Ö –æ–≥–æ–ª–æ—à–µ–Ω—å –Ω–µ–º–∞—î üçÉ</h5>
        {% endif %}
    </div>
</div>
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="staticBackdropLabel">–ü—É–±–ª—ñ–∫–∞—Ü—ñ—è –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                –í–∏ –¥—ñ–π—Å–Ω–æ —Ö–æ—á–µ—Ç–µ –∑–∞—Ç–≤–µ—Ä–¥–∏—Ç–∏ —Ü–µ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–ù—ñ</button>
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" id="approveButton">–¢–∞–∫</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block script %}
<script src="{% static 'js/admin_approve.js' %}"></script>
{% endblock %}